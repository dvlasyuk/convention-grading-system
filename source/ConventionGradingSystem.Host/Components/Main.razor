@page "/"

@using ConventionGradingSystem.DataAccess.Configuration
@using Microsoft.AspNetCore.Components.Web
@using Microsoft.Extensions.Options
@using MudBlazor

@inject IOptions<ApplicationConfiguration> Configuration

<PageTitle>Главная страница</PageTitle>

<MudText Typo="Typo.h6">Приветствуем тебя, важный пирожочек!</MudText>

<MudText Class="mt-3">
    Добро пожаловать в систему оценивания cлёта <strong>@_conventionName</strong>. Для получения
    интересующей тебя информации ты можешь воспользоваться главным меню, которое доступно по кнопке
    в левом верхнем углу
</MudText>

<MudList T="string" Dense="true" Class="mt-3">

    @if (_contestsSectionAvailable)
    {
        <MudListItem Href="/contests" Icon="@Icons.Material.Filled.Star">
            Раздел <MudLink Href="/contests">Конкурсы мероприятий</MudLink> содержит всю необходимую информацию
            о конкурсах, в рамках которых проводимые мероприятия оцениваются экспертами и/или участниками
            слёта по настроенным критериям
        </MudListItem>
    }

    @if (_votingsSectionAvailable)
    {
        <MudListItem Href="/votings" Icon="@Icons.Material.Filled.HowToVote">
            В разделе <MudLink Href="/votings">Зрительские голосования</MudLink> ты найдёшь всю требуемую
            информацию о конкурсах зрительских симпатий, в рамках которых участники слёта голосуют за
            понравившихся им участников конкурсов
        </MudListItem>
    }

    @if (_teamsSectionAvailable)
    {
        <MudListItem Href="/teams" Icon="@Icons.Material.Filled.Groups">
            В разделе <MudLink Href="/teams">Команды участников</MudLink> собрана информация о регистрации и
            посещении участниками слёта мероприятий, которую можно использовать в рамках системы мотивации
        </MudListItem>
    }

</MudList>

@code {

    private string _conventionName = string.Empty;

    private bool _contestsSectionAvailable = false;
    private bool _votingsSectionAvailable = false;
    private bool _teamsSectionAvailable = false;

    protected override void OnInitialized()
    {
        _conventionName = Configuration.Value.ConventionName;

        _contestsSectionAvailable = Configuration.Value.Contests.Count > 0;
        _votingsSectionAvailable = Configuration.Value.Votings.Count > 0;
        _teamsSectionAvailable =
            Configuration.Value.Teams.Count > 0 &&
            Configuration.Value.Contests.Count > 0;
    }
}
