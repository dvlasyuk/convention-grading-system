@inherits LayoutComponentBase

@using ConventionGradingSystem.DataAccess.Configuration
@using Microsoft.AspNetCore.Components.Web
@using Microsoft.Extensions.Options
@using MudBlazor

@inject IOptions<ApplicationConfiguration> Configuration

@if (!_votingsSectionAvailable)
{
    <PageTitle>Зрительские голосования</PageTitle>
    <MudAlert Severity="Severity.Warning">
        В рамках слёта не проводится ни одно зрительское голосование. Если ты вводил адрес страницы в адресную
        строку браузера вручную или вставлял скопированную ссылку, то проверь не ошибся ли ты при вводе или
        копировании. Если ты переходил по прямой ссылке, то проверь корректность этой ссылки или попроси
        сделать это того, кто её тебе предоставил. Если ты попал сюда с другой страницы системы, то это
        ошибка - обратись, пожалуйста, к разработчикам
    </MudAlert>
}
else
{
    @Body
}

@code {

    private bool _votingsSectionAvailable = false;

    protected override void OnInitialized()
    {
        _votingsSectionAvailable = Configuration.Value.Votings.Count > 0;
    }
}
